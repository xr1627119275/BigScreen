<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>深基坑监测</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="./css/clear.css">
  <link rel="stylesheet" href="./css/home.css">
  <script src="./js/jquery.min.js"></script>
  <link rel="stylesheet" href="./js/layui/dist/css/layui.css">
  <script src="./js/layui/dist/layui.js"></script>
  <script src="./js/echarts.min.js"></script>

</head>

<body style="position: relative; overflow: hidden">
  <div id="screen">
    <div id="header" style="width: 100%; height: 101px; vertical-align: middle"></div>
    <main id="Engineing">
      <div class="main-left">
        <div style="display: flex; justify-content: space-between;">
          <div class="charts_content_box_308" style="height: 308px">
            <div class="content-header">
              <span class="ch-tit">工程数据</span>
            </div>
            <div class="main_body" id="project-container"  style="display: flex;">
              
                <div class="layout_icon_text">
                    <div class="icon_img" style="background-image: url('./img/sjk_project1.png');"></div>
                    <div class="main_text">
                      <p>3</p>
                      <p>基坑总数</p>
                    </div>
                </div>
                <div class="layout_icon_text">
                    <div class="icon_img" style="background-image: url('./img/sjk_project2.png');"></div>
                    <div class="main_text">
                      <p>3</p>
                      <p>测点总数</p>
                    </div>
                </div>
                <div class="layout_icon_text">
                    <div class="icon_img" style="background-image: url('./img/sjk_project3.png');"></div>
                    <div class="main_text">
                      <p>3</p>
                      <p>测点在线数</p>
                    </div>
                </div>
                <div class="layout_icon_text">
                    <div class="icon_img" style="background-image: url('./img/sjk_project4.png');"></div>
                    <div class="main_text">
                      <p>0</p>
                      <p>测点离线数</p>
                    </div>
                </div>

            </div>
          </div>
          <div class="charts_content_box_308" style="height: 308px">
            <div class="content-header">
              <span class="ch-tit">运行状态</span>
              <div class="ch-tit nav_tit_right_tip layui-form" >
                <select name="quiz" title="请选择">
                  <option value="">1#基坑</option>
                </select>
              </div>
            </div>
            <div id="RunStatus" class="main_body" style="display: flex;" >
              <div id="runmainimg" style="background-image: url('./img/sjk_status_main.png');"></div>
              <div id="StatusData">
                <p class="starttime">开始时间：2021-11-30  12:23</p>
                <div class="status_item">
                  <div class="status_icon" style="background-image: url('./img/gzm_status_day.png');"></div>
                  <div class="status_body">
                    <p>
                      <span class="st_num">2</span> <span>天</span> 
                    </p>
                    <p>运行天速</p>
                  </div>
                </div>
                <div class="status_item">
                  <div class="status_icon" style="background-image: url('./img/gzm_status_normal.png');"></div>
                  <div class="status_body">
                    <p>
                      <span class="st_num">3</span> <span>个</span> 
                    </p>
                    <p>正常测点</p>
                  </div>
                </div>
                <div class="status_item">
                  <div class="status_icon" style="background-image: url('./img/gzm_status_fail.png');"></div>
                  <div class="status_body">
                    <p>
                      <span class="st_num">1</span> <span>个</span> 
                    </p>
                    <p>异常测点</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="charts_content_box charts_content_box_1252_308" style="width: 100%; height: 308px">
          <div class="content-header">
            <div class="nav_tit active">
              <span class="ch-tit">实时数据</span>
            </div>
            <div class="nav_tit">
              <span class="ch-tit">历史数据</span>
            </div>
            <div class="ch-tit nav_tit_right_tip layui-form" >
              <select name="quiz" title="请选择">
                <option value="">1#基坑</option>
              </select>
            </div>
          </div>
          <div class="main_body" style="display: flex;">
              <div id="_Table" class="main_body_table">
                <table id="table"></table>
              </div>
          </div>
        </div>


        <div style="display: flex; justify-content: space-between;">
          <div class="charts_content_box_308" style="height: 308px">
            <div class="content-header">
              <span class="ch-tit">地下水位监测</span>
              <div class="ch-tit nav_tit_right_tip layui-form">
                <select name="quiz" title="请选择" >
                    <option value="">1#基坑</option>
                </select>
              </div>
            </div>
            <div class="main_body" style="display: flex;">
              <div id="TiltMonitori" class="normal_chart"></div>
            </div>
          </div>
          <div class="charts_content_box_308" style="height: 308px">
            <div class="content-header">
              <span class="ch-tit">地表沉降监测</span>
              <div class="ch-tit nav_tit_right_tip layui-form">
                <select name="quiz" title="请选择" >
                    <option value="">1#基坑</option>
                </select>
              </div>
            </div>
            <div class="main_body" >
              <div id="verticalMonitor" class="normal_chart"></div>
            </div>
          </div>
        </div>

      </div>
      <div class="main-right">
        <div class="charts_content_box_308" style="height: 308px">
          <div class="content-header">
            <span class="ch-tit">近30天告警数据</span>
          </div>
          <div class="main_body" id="alarm-container"  style="display: flex;">
              <div id="AlarmChart" class="normal_chart"></div>
         </div>
        </div>
        <div class="charts_content_box_308" style="height: 308px">
          <div class="content-header">
            <span class="ch-tit">水平位移监测</span>
            <div class="ch-tit nav_tit_right_tip layui-form">
              <select name="quiz" title="请选择" >
                  <option value="">1#基坑</option>
              </select>
            </div>
          </div>
          <div class="main_body" style="display: flex;">
              <div id="HorizontalmMonitori" class="normal_chart"></div>
          </div>
        </div>
        <div class="charts_content_box_308" style="height: 308px">
          <div class="content-header">
            <span class="ch-tit">轴力监测</span>
            <div class="ch-tit nav_tit_right_tip layui-form">
              <select name="quiz" title="请选择" >
                  <option value="">1#基坑</option>
              </select>
            </div>
          </div>
          <div class="main_body" style="display: flex;">
            <div id="PoleMonitor" class="normal_chart"></div>
          </div>
        </div>
      </div>
    </main>

  </div>
  <canvas id="canvas"></canvas>


  <script src="./js/common.js"></script>

  <script>
    var form, table;
    var Charts = {}

    layui.use(['form', 'table'], function () {
      form = layui.form
      table = layui.table
      renderTable()
    })

    $(function () {
      var opts = {
        color: ['#36C0C5', '#2459F4', '#F18A26'],
        grid:{
            x:10,
            x2:30,
        },
      }

      var optPie = {
            legend: {
                right: '10%'
            },
            series: {
                radius: ['55%', '80%'],
                center: ['30%', '50%'],
            },
            color: ['#264ACF','#36C0C5' ],
        }

        initPieChart($("#AlarmChart")[0], "AlarmChart",
            [
                {name: '超出预警值', value: '15'},
                {name: '超出控制值', value: '10'},
            ],
            Object.assign(optPie, { itemGap: 50 })
        )
      initBrokenLineChart($("#HorizontalmMonitori")[0], "HorizontalmMonitori",
            [
                {
                    name: '测点1',
                    type: 'line',
                    stack: 'Total',
                    smooth: true,
                    data: new Array(6).fill(0).map(item=> parseInt(Math.random() * 30))
                },
                {
                    name: '测点2',
                    type: 'line',
                    stack: 'Total',
                    smooth: true,
                    data: new Array(6).fill(0).map(item=> parseInt(Math.random() * 30))
                },
                {
                    name: '测点3',
                    type: 'line',
                    stack: 'Total',
                    smooth: true,
                    data: new Array(6).fill(0).map((item, index)=> (index % 2 == 0 ? -1 : 1 ) * parseInt(Math.random() * 30))
                }
            ]
        , Object.assign({ title: { text: '/mm' }, xAxis: {
                boundaryGap: true,
          data: ['12:00\n11-23', '13:00\n11-23', '14:00\n11-23', '15:00\n11-23', '16:00\n11-23',  '17:00\n11-23']
        }}, opts))
     
      initBrokenLineChart($("#TiltMonitori")[0], "TiltMonitori",
            [
                {
                    name: '测点1',
                    type: 'line',
                    stack: 'Total',
                    smooth: true,
                    data: new Array(6).fill(0).map(item=> Number(Math.random().toFixed(2)))
                },
                {
                    name: '测点2',
                    type: 'line',
                    stack: 'Total',
                    smooth: true,
                    data: new Array(6).fill(0).map(item=> Number(Math.random().toFixed(2)))
                },
                {
                    name: '测点3',
                    type: 'line',
                    stack: 'Total',
                    smooth: true,
                    data: new Array(6).fill(0).map((item, index)=> (index % 2 == 0 ? -1 : 1 ) * Number(Math.random().toFixed(2)))
                }
            ]
        , Object.assign({ title: { text: '/mm' }, xAxis: {
          boundaryGap: true,

          data: ['12:00\n11-23', '13:00\n11-23', '14:00\n11-23', '15:00\n11-23', '16:00\n11-23',  '17:00\n11-23']
        }}, opts))

      initBrokenLineChart($("#verticalMonitor")[0], "verticalMonitor",
            [
                {
                    name: '测点1',
                    type: 'line',
                    stack: 'Total',
                    smooth: true,
                    data: new Array(6).fill(0).map(item=> parseInt(Math.random() * 30))
                },
                {
                    name: '测点2',
                    type: 'line',
                    stack: 'Total',
                    smooth: true,
                    data: new Array(6).fill(0).map(item=> parseInt(Math.random() * 30))
                },
                {
                    name: '测点3',
                    type: 'line',
                    stack: 'Total',
                    smooth: true,
                    data: new Array(6).fill(0).map((item, index) => (index % 2 == 0 ? -1 : 1 ) * parseInt(Math.random() * 30))
                }
            ]
        , Object.assign({ title: { text: '/mm' }, xAxis: {
          boundaryGap: true,
          data: ['12:00\n11-23', '13:00\n11-23', '14:00\n11-23', '15:00\n11-23', '16:00\n11-23',  '17:00\n11-23']
        }
    }, opts))

      var PoleMonitorChart = initBrokenLineChart($("#PoleMonitor")[0], "PoleMonitor",
            [
                {
                    name: '测点1',
                    type: 'line',
                    stack: 'Total',
                    smooth: true,
                    data: new Array(6).fill(0).map(item=> parseInt(Math.random() * 30))
                },
                {
                    name: '测点2',
                    type: 'line',
                    stack: 'Total',
                    smooth: true,
                    data: new Array(6).fill(0).map(item=> parseInt(Math.random() * 30))
                },
                {
                    name: '测点3',
                    type: 'line',
                    stack: 'Total',
                    smooth: true,
                    data: new Array(6).fill(0).map(item=> parseInt(Math.random() * 30))
                }
            ]
        , Object.assign({ title: { text: '/KN' }, xAxis: {
          boundaryGap: true,

          data: ['12:00\n11-23', '13:00\n11-23', '14:00\n11-23', '15:00\n11-23', '16:00\n11-23',  '17:00\n11-23']
        }}, opts))

    })


    function renderTable() {
      table.render({
        elem: '#table',
        height: $("#table").parent().height() - 20,
        data: [
          { name1: '基坑检测点001', name2: '地下水位', name3: "0.15mm", name4: "0.15mm", name5: '2.00mm', name6: "正常",name7: "2021年08月24日 07:25:30"  },
          { name1: '基坑检测点002', name2: '基坑周边沉降', name3: "0.13mm", name4: "0.90mm", name5: '2.00mm', name6: "正常",name7: "2021年08月24日 07:24:30"  },
          { name1: '基坑检测点003', name2: '深坑水平位移', name3: "0.14mm", name4: "0.89mm", name5: '2.00mm', name6: "正常",name7: "2021年08月24日 07:23:30"  },
          { name1: '基坑检测点004', name2: '地下水位', name3: "0.19mm", name4: "0.90mm",name5: '2.00mm', name6: "正常",name7: "2021年08月24日 07:22:30"  },
          { name1: '基坑检测点005', name2: '基坑周边沉降', name3: "0.20mm", name4: "0.72mm", name5: '2.00mm', name6: "正常",name7: "2021年08月24日 07:21:30"  },
        ],
        cols: [
          [
            { field: 'name1', title: '测点名称' },
            { field: 'name2', title: '检测类型'},
            { field: 'name3', title: '本次变化值' },
            { field: 'name4', title: '累计变化值' },
            { field: 'name5', title: '预警值' },
            { field: 'name6', title: '状态' },
            { field: 'name7', title: '检测时间', width: "20%" },
          ]
        ],
        done: function () {
          $("#_Table .layui-table-body").layTableScroll()
        }
      })
    }

    $(window).resize(() => {
      for (var key in Charts) {
        if (!Charts[key]) continue
        Charts[key].resize()
      }
    });

  </script>
  <script src="./js/echarts-component.js"></script>
  <script src="js/timeline.js"></script>
</body>

</html>